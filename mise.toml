[tools]
dotnet = ["10"]

[tasks.build]
description = "Build the solution"
run = "dotnet build"

[tasks.build-release]
description = "Build the solution in Release configuration"
run = "dotnet build -c Release"

[tasks.test]
description = "Run all tests"
run = "dotnet test"

[tasks.clean]
description = "Clean build artifacts"
run = "dotnet clean"

[tasks.restore]
description = "Restore NuGet packages"
run = "dotnet restore"

[tasks.format]
description = "Format code using CSharpier"
depends = ["restore"]
run = "dotnet csharpier format ."

[tasks.install]
description = "Install the plugin to the NuGet plugins directory (on macOS/Linux)"
depends = ["build"]
run = [
  "mkdir -p ~/.nuget/plugins/netcore/nuget-plugin-gh",
  "cp src/GhCredentialProvider/bin/Debug/net10.0/GhCredentialProvider.dll ~/.nuget/plugins/netcore/nuget-plugin-gh/",
  "echo 'Plugin installed to ~/.nuget/plugins/netcore/nuget-plugin-gh/'"
]
